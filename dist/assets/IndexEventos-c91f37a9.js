import{u as q,r as i,a as z,i as A,o as H,b as l,c as m,d as w,e as s,f as t,w as a,t as u,g as _,F as Q,h as T,j as d,k as g,l as y,R as E,m as W}from"./index-b670bd76.js";import{b as N,s as M}from"./APIConstant-43486e71.js";import"./index.esm-a7e89c92.js";import{h as G}from"./moment-a9aaa855.js";import{l as J}from"./lodash-7cd6c7cd.js";import{i as K}from"./laravel-vue-pagination.es-b119d6df.js";const O={key:0,className:"card"},X={class:"col-12"},Z={class:"card-w-title"},P=s("h5",null,"Eventos",-1),ee=s("h5",null,"Registro das Eventos",-1),te={class:"flex flex-wrap align-items-center justify-content-between gap-2"},ae=s("span",{class:"text-xl text-900 font-bold"},"Eventos",-1),se=["src","alt"],oe=s("i",{class:"pi pi-file-edit"},null,-1),ne=s("i",{class:"pi pi-eye"},null,-1),ie=["onClick"],le=s("i",{class:"pi pi-trash"},null,-1),de=[le],re={key:1,class:"text-center"},ce=s("p",null,"Por Favor Aguarde...",-1),ue=s("div",{class:"flex align-items-center justify-content-center"},[s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),s("span",null,"Tem certeza que deseja proceder?")],-1),be={__name:"IndexEventos",setup(me){const I=q(),b=i(!0);i(!1),i(!1);const n=i({data:[]});i([]);const x=z(),f=i(null),p=i(!1);function R(){I&&I.back()}const k=i(!1);let C=i(null);const v=async(r=1)=>{T.get(`${N}/promotor-eventos?page=${r}`,{params:{query:f.value}}).then(c=>{n.value=c.data.event,b.value=!1}).catch(c=>{b.value=!1,x.add({severity:"error",summary:`${c}`,detail:"Message Detail",life:3e3}),R()})};A(f,J.debounce(()=>{v()},300));const B=()=>{p.value=!1},S=r=>{p.value=!0,C.value=r},V=()=>{k.value=!0,T.delete(`${N}/promotor-eventos/${C.value}`).then(()=>{n.value.data=n.value.data.filter(r=>r.id!==C.value),B(),x.add({severity:"success",summary:"Sucesso",detail:"Message Detail",life:3e3})}).catch(r=>{x.add({severity:"error",summary:`${r}`,detail:"Message Detail",life:3e3}),k.value=!1}).finally(()=>{k.value=!1})};return H(()=>{v()}),(r,c)=>{const $=l("InputIcon"),F=l("InputText"),U=l("IconField"),D=l("Button"),o=l("Column"),h=l("Tag"),j=l("DataTable"),L=l("ProgressSpinner"),Y=l("Dialog");return m(),w(Q,null,[b.value?(m(),w("div",re,[t(L,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ce])):(m(),w("div",O,[s("div",X,[s("div",Z,[P,t(U,{iconPosition:"left"},{default:a(()=>[t($,{class:"pi pi-search"}),t(F,{type:"text",placeholder:"Procurar ...",modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=e=>f.value=e)},null,8,["modelValue"])]),_:1})]),ee,s("p",null,"Esta tabela contem "+u(n.value.data?n.value.total:0)+" Registros.",1),t(j,{value:n.value.data,tableStyle:"min-width: 50rem"},{header:a(()=>[s("div",te,[ae,t(D,{icon:"pi pi-refresh",rounded:"",raised:"",onClick:v})])]),footer:a(()=>[d(" No total são "+u(n.value.data?n.value.total:0)+" Eventos. ",1)]),default:a(()=>[t(o,{field:"name",header:"#"},{body:a(e=>[d(u(e.index+1),1)]),_:1}),t(o,{header:"Image"},{body:a(e=>[s("img",{src:_(M)+e.data.image,alt:_(M)+e.data.image,class:"shadow-2",width:"100",style:{"border-radius":"15px"}},null,8,se)]),_:1}),t(o,{field:"name",sortable:"",header:"Nome"}),t(o,{field:"city.name",sortable:"",header:"Cidade"}),t(o,{field:"province.name",sortable:"",header:"Província"}),t(o,{field:"category.name",sortable:"",header:"Categoria"}),t(o,{field:"type.name",sortable:"",header:"Tipo"}),t(o,{field:"status.name",sortable:"",header:"Estado"},{body:a(e=>[e.data.status_id==2?(m(),g(h,{key:0,severity:"success"},{default:a(()=>[d(u(e.data.status.name),1)]),_:2},1024)):y("",!0),e.data.status_id==1?(m(),g(h,{key:1,severity:"danger"},{default:a(()=>[d(u(e.data.status.name),1)]),_:2},1024)):y("",!0),e.data.status_id==3?(m(),g(h,{key:2,severity:"warning"},{default:a(()=>[d(u(e.data.status.name),1)]),_:2},1024)):y("",!0),e.data.status_id==4?(m(),g(h,{key:3,severity:"info"},{default:a(()=>[d(u(e.data.status.name),1)]),_:2},1024)):y("",!0)]),_:1}),t(o,{field:"created_at",sortable:"",header:"Criado em"},{body:a(e=>[d(u(_(G)(e.data.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),t(o,{header:"Ações"},{body:a(e=>[t(_(E),{to:"/admin/eventos/"+e.data.id+"/edit"},{default:a(()=>[oe]),_:2},1032,["to"]),d(" | "),t(_(E),{to:"/admin/eventos/"+e.data.id},{default:a(()=>[ne]),_:2},1032,["to"]),d(" | "),s("a",{href:"#",onClick:W(_e=>S(e.data.id),["prevent"])},de,8,ie)]),_:1})]),_:1},8,["value"]),t(_(K),{data:n.value,onPaginationChangePage:v,"bg-whitebg-blue-50":"",style:{width:"10px"}},null,8,["data"])])])),t(Y,{header:"Confirmação",visible:p.value,"onUpdate:visible":c[1]||(c[1]=e=>p.value=e),style:{width:"350px"},modal:!0},{footer:a(()=>[t(D,{label:"Não",icon:"pi pi-times",onClick:B,class:"p-button-text"}),t(D,{label:"Sim",icon:"pi pi-check",onClick:V,class:"p-button-text",autofocus:""})]),default:a(()=>[ue]),_:1},8,["visible"])],64)}}};export{be as default};
