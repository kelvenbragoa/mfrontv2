import{u as q,r as i,a as z,i as A,o as H,b as r,c as m,d as w,e as o,f as e,w as a,g as _,t as u,F as Q,h as T,j as n,R as I,k as y,l as b,m as W}from"./index-4c06444b.js";import{b as E,s as R}from"./APIConstant-7cd3c3b1.js";import"./index.esm-7b5acfa1.js";import{h as G}from"./moment-a9aaa855.js";import{l as J}from"./lodash-ca50940c.js";import{i as K}from"./laravel-vue-pagination.es-a9d3db26.js";const O={key:0,className:"card"},X={class:"col-12"},Z={class:"card-w-title"},P=o("h5",null,"Eventos",-1),ee=o("h5",null,"Registro das Eventos",-1),te=o("i",{class:"pi pi-plus"},null,-1),ae={class:"flex flex-wrap align-items-center justify-content-between gap-2"},oe=o("span",{class:"text-xl text-900 font-bold"},"Eventos",-1),se=["src","alt"],ne=o("i",{class:"pi pi-file-edit"},null,-1),le=o("i",{class:"pi pi-eye"},null,-1),ie=["onClick"],re=o("i",{class:"pi pi-trash"},null,-1),de=[re],ce={key:1,class:"text-center"},ue=o("p",null,"Por Favor Aguarde...",-1),me=o("div",{class:"flex align-items-center justify-content-center"},[o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),o("span",null,"Tem certeza que deseja proceder?")],-1),xe={__name:"IndexEventos",setup(_e){const B=q(),x=i(!0);i(!1),i(!1);const l=i({data:[]});i([]);const k=z(),p=i(null),f=i(!1);function M(){B&&B.back()}const C=i(!1);let D=i(null);const v=async(d=1)=>{T.get(`${E}/promotor-eventos?page=${d}`,{params:{query:p.value}}).then(c=>{l.value=c.data.event,x.value=!1}).catch(c=>{x.value=!1,k.add({severity:"error",summary:`${c}`,detail:"Message Detail",life:3e3}),M()})};A(p,J.debounce(()=>{v()},300));const N=()=>{f.value=!1},S=d=>{f.value=!0,D.value=d},V=()=>{C.value=!0,T.delete(`${E}/promotor-eventos/${D.value}`).then(()=>{l.value.data=l.value.data.filter(d=>d.id!==D.value),N(),k.add({severity:"success",summary:"Sucesso",detail:"Message Detail",life:3e3})}).catch(d=>{k.add({severity:"error",summary:`${d}`,detail:"Message Detail",life:3e3}),C.value=!1}).finally(()=>{C.value=!1})};return H(()=>{v()}),(d,c)=>{const $=r("InputIcon"),F=r("InputText"),U=r("IconField"),h=r("Button"),s=r("Column"),g=r("Tag"),j=r("DataTable"),L=r("ProgressSpinner"),Y=r("Dialog");return m(),w(Q,null,[x.value?(m(),w("div",ce,[e(L,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ue])):(m(),w("div",O,[o("div",X,[o("div",Z,[P,e(U,{iconPosition:"left"},{default:a(()=>[e($,{class:"pi pi-search"}),e(F,{type:"text",placeholder:"Procurar ...",modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=t=>p.value=t)},null,8,["modelValue"])]),_:1})]),ee,e(_(I),{to:"/promotor/eventos/create"},{default:a(()=>[e(h,{label:"Criar Novo Registro",class:"mr-2 mb-2"},{default:a(()=>[te,n(" Criar Novo Registro ")]),_:1})]),_:1}),o("p",null,"Esta tabela contem "+u(l.value.data?l.value.total:0)+" Registros.",1),e(j,{value:l.value.data,tableStyle:"min-width: 50rem"},{header:a(()=>[o("div",ae,[oe,e(h,{icon:"pi pi-refresh",rounded:"",raised:"",onClick:v})])]),footer:a(()=>[n(" No total são "+u(l.value.data?l.value.total:0)+" Eventos. ",1)]),default:a(()=>[e(s,{field:"name",header:"#"},{body:a(t=>[n(u(t.index+1),1)]),_:1}),e(s,{header:"Image"},{body:a(t=>[o("img",{src:_(R)+t.data.image,alt:_(R)+t.data.image,class:"shadow-2",width:"100",style:{"border-radius":"15px"}},null,8,se)]),_:1}),e(s,{field:"name",sortable:"",header:"Nome"}),e(s,{field:"city.name",sortable:"",header:"Cidade"}),e(s,{field:"province.name",sortable:"",header:"Província"}),e(s,{field:"category.name",sortable:"",header:"Categoria"}),e(s,{field:"type.name",sortable:"",header:"Tipo"}),e(s,{field:"status.name",sortable:"",header:"Estado"},{body:a(t=>[t.data.status_id==2?(m(),y(g,{key:0,severity:"success"},{default:a(()=>[n(u(t.data.status.name),1)]),_:2},1024)):b("",!0),t.data.status_id==1?(m(),y(g,{key:1,severity:"danger"},{default:a(()=>[n(u(t.data.status.name),1)]),_:2},1024)):b("",!0),t.data.status_id==3?(m(),y(g,{key:2,severity:"warning"},{default:a(()=>[n(u(t.data.status.name),1)]),_:2},1024)):b("",!0),t.data.status_id==4?(m(),y(g,{key:3,severity:"info"},{default:a(()=>[n(u(t.data.status.name),1)]),_:2},1024)):b("",!0)]),_:1}),e(s,{field:"created_at",sortable:"",header:"Criado em"},{body:a(t=>[n(u(_(G)(t.data.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),e(s,{header:"Ações"},{body:a(t=>[e(_(I),{to:"/promotor/eventos/"+t.data.id+"/edit"},{default:a(()=>[ne]),_:2},1032,["to"]),n(" | "),e(_(I),{to:"/promotor/eventos/"+t.data.id},{default:a(()=>[le]),_:2},1032,["to"]),n(" | "),o("a",{href:"#",onClick:W(pe=>S(t.data.id),["prevent"])},de,8,ie)]),_:1})]),_:1},8,["value"]),e(_(K),{data:l.value,onPaginationChangePage:v,"bg-whitebg-blue-50":"",style:{width:"10px"}},null,8,["data"])])])),e(Y,{header:"Confirmação",visible:f.value,"onUpdate:visible":c[1]||(c[1]=t=>f.value=t),style:{width:"350px"},modal:!0},{footer:a(()=>[e(h,{label:"Não",icon:"pi pi-times",onClick:N,class:"p-button-text"}),e(h,{label:"Sim",icon:"pi pi-check",onClick:V,class:"p-button-text",autofocus:""})]),default:a(()=>[me]),_:1},8,["visible"])],64)}}};export{xe as default};
