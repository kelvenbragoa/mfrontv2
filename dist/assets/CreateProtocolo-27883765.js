import{u as T,r as i,a as q,h as R,o as $,b as B,c as g,d as S,e,f as t,w as E,g as o,s as m,v as u,t as V,k as I,l as L,j as M,x as p}from"./index-da4e25fd.js";import{b as W}from"./APIConstant-3b96cd31.js";import{u as j}from"./vee-validate.esm-f9eb7de3.js";import{c as z,a as _}from"./index.esm-8e4dfa6c.js";import"./moment-a9aaa855.js";const A={key:0,className:"card"},G={class:"col-12"},O={class:"card-w-title"},H=e("i",{class:"pi pi-angle-left"},null,-1),J=e("h5",null,"Criar Protocolo",-1),K=e("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),Q={class:"col-12 md:col-12"},X={class:"card p-fluid"},Y=e("h5",null,"Formulário Criação de Protocolo",-1),Z=e("h5",null,"Informação Geral",-1),ee={class:"field"},oe=e("label",{for:"name"},"Nome",-1),se={id:"name-help",class:"p-error"},ae={class:"field"},le=e("label",{for:"name"},"Telefone",-1),te={id:"mobile-help",class:"p-error"},ie={class:"field"},re=e("label",{for:"bi"},"Bilhete de Identificação",-1),ne={id:"bi-help",class:"p-error"},de={key:1,class:"text-center"},ce=e("p",null,"Por Favor Aguarde...",-1),ve={__name:"CreateProtocolo",setup(me){const n=T(),P=i(!1),r=i(!1);i([]),i([]),i([]),i([]);const k=q();function N(){n&&n.back()}const U=z({name:_().required().trim().label("Nome"),bi:_().required().trim().label("BI"),mobile:_().required().trim().label("Telefeone"),event_id:_().required().label("Evento")}),{defineField:d,handleSubmit:w,resetForm:D,errors:l,setErrors:F}=j({validationSchema:U}),[b]=d("name"),[c]=d("event_id"),[f]=d("bi"),[v]=d("mobile"),h=w(y=>{r.value=!0,R.post(`${W}/promotor-protocolo`,y,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{D(),n.back(),k.add({severity:"success",summary:"Successo",detail:"Protocolo criado com sucesso",life:3e3})}).catch(s=>{r.value=!1,k.add({severity:"error",summary:`${s.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),s.response.data.errors&&F(s.response.data.errors)}).finally(()=>{r.value=!1})});return $(()=>{c.value=n.currentRoute.value.params.id}),(y,s)=>{const x=B("Button"),C=B("ProgressSpinner");return P.value?(g(),S("div",de,[t(C,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ce])):(g(),S("div",A,[e("div",G,[e("div",O,[t(x,{label:"Voltar",class:"mr-2 mb-2",onClick:N},{default:E(()=>[H,M(" Voltar")]),_:1}),J]),K,e("form",{onSubmit:s[4]||(s[4]=(...a)=>o(h)&&o(h)(...a))},[e("div",Q,[e("div",X,[Y,Z,e("div",ee,[oe,t(o(p),{modelValue:o(b),"onUpdate:modelValue":s[0]||(s[0]=a=>m(b)?b.value=a:null),id:"name",type:"text",class:u({"p-invalid":o(l).name})},null,8,["modelValue","class"]),t(o(p),{modelValue:o(c),"onUpdate:modelValue":s[1]||(s[1]=a=>m(c)?c.value=a:null),id:"event_id",type:"hidden",class:u({"p-invalid":o(l).event_id})},null,8,["modelValue","class"]),e("small",se,V(o(l).name),1)]),e("div",ae,[le,t(o(p),{modelValue:o(v),"onUpdate:modelValue":s[2]||(s[2]=a=>m(v)?v.value=a:null),id:"mobile",type:"text",class:u({"p-invalid":o(l).mobile})},null,8,["modelValue","class"]),e("small",te,V(o(l).mobile),1)]),e("div",ie,[re,t(o(p),{modelValue:o(f),"onUpdate:modelValue":s[3]||(s[3]=a=>m(f)?f.value=a:null),id:"bi",type:"text",class:u({"p-invalid":o(l).bi})},null,8,["modelValue","class"]),e("small",ne,V(o(l).bi),1)])]),t(x,{label:"Submeter",class:"mr-2 mb-2",onClick:o(h),disabled:r.value},null,8,["onClick","disabled"]),r.value?(g(),I(C,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):L("",!0)])],32)])]))}}};export{ve as default};
