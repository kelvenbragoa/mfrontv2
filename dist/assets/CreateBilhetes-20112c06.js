import{u as E,r as u,a as I,h as L,o as M,b as N,c as C,d as P,e as s,f as o,w as Q,g as e,s as d,v as r,t as m,k as W,l as j,j as z,x as n}from"./index-13ef8100.js";import{b as A}from"./APIConstant-069209c7.js";import{u as G}from"./vee-validate.esm-ada8070b.js";import{c as O,a as c}from"./index.esm-7b5acfa1.js";import"./moment-a9aaa855.js";const J={key:0,className:"card"},K={class:"col-12"},X={class:"card-w-title"},Y=s("i",{class:"pi pi-angle-left"},null,-1),Z=s("h5",null,"Criar Ticket",-1),ee=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),se={class:"col-12 md:col-12"},te={class:"card p-fluid"},ae=s("h5",null,"Formulário Criação de Bilhetes",-1),le=s("h5",null,"Informação Geral",-1),oe={class:"field"},ie=s("label",{for:"name"},"Nome",-1),de={id:"name-help",class:"p-error"},re={class:"field"},ne=s("label",{for:"price"},"Preço",-1),ce={id:"price-help",class:"p-error"},me={class:"field"},ue=s("label",{for:"description"},"Descrição",-1),_e={id:"description-help",class:"p-error"},pe={class:"field"},ve=s("label",{for:"max_qtd"},"Quantidade Máxima",-1),he={id:"max_qtd-help",class:"p-error"},fe={class:"formgrid grid"},be={class:"field col"},Ve=s("label",{for:"start_date"},"Data de Inicio",-1),ge={id:"start_date-help",class:"p-error"},xe={class:"field col"},ye=s("label",{for:"start_time"},"Horas de Inicio",-1),ke={id:"start_time-help",class:"p-error"},qe={class:"formgrid grid"},Ce={class:"field col"},Be=s("label",{for:"end_date"},"Data de Termino",-1),De={id:"end_date-help",class:"p-error"},Se={class:"field col"},Ue=s("label",{for:"end_time"},"Horas de Termino",-1),Ne={id:"end_time-help",class:"p-error"},Pe={key:1,class:"text-center"},Te=s("p",null,"Por Favor Aguarde...",-1),Ie={__name:"CreateBilhetes",setup(we){const p=E(),T=u(!1),_=u(!1);u([]),u([]),u([]),u([]);const B=I();function w(){p&&p.back()}const F=O({name:c().required().trim().label("Nome"),price:c().required().trim().label("Preco"),description:c().required().trim().label("Descricao"),max_qtd:c().required().label("Quantidade"),event_id:c().required().label("Evento"),start_date:c().required().label("Data"),start_time:c().required().label("Horas"),end_date:c().required().label("Data"),end_time:c().required().label("Horas")}),{defineField:i,handleSubmit:H,resetForm:R,errors:l,setErrors:$}=G({validationSchema:F}),[h]=i("name"),[v]=i("event_id"),[f]=i("description"),[b]=i("max_qtd"),[V]=i("start_date"),[g]=i("start_time"),[x]=i("end_date"),[y]=i("end_time"),[k]=i("price"),q=H(D=>{_.value=!0,L.post(`${A}/promotor-tickets`,D,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{R(),p.back(),B.add({severity:"success",summary:"Successo",detail:"Bilhete criado com sucesso",life:3e3})}).catch(t=>{_.value=!1,B.add({severity:"error",summary:`${t.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),t.response.data.errors&&$(t.response.data.errors)}).finally(()=>{_.value=!1})});return M(()=>{v.value=p.currentRoute.value.params.id}),(D,t)=>{const S=N("Button"),U=N("ProgressSpinner");return T.value?(C(),P("div",Pe,[o(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),Te])):(C(),P("div",J,[s("div",K,[s("div",X,[o(S,{label:"Voltar",class:"mr-2 mb-2",onClick:w},{default:Q(()=>[Y,z(" Voltar")]),_:1}),Z]),ee,s("form",{onSubmit:t[9]||(t[9]=(...a)=>e(q)&&e(q)(...a))},[s("div",se,[s("div",te,[ae,le,s("div",oe,[ie,o(e(n),{modelValue:e(h),"onUpdate:modelValue":t[0]||(t[0]=a=>d(h)?h.value=a:null),id:"name",type:"text",class:r({"p-invalid":e(l).name})},null,8,["modelValue","class"]),s("small",de,m(e(l).name),1)]),s("div",re,[ne,o(e(n),{modelValue:e(k),"onUpdate:modelValue":t[1]||(t[1]=a=>d(k)?k.value=a:null),id:"price",type:"number",class:r({"p-invalid":e(l).price})},null,8,["modelValue","class"]),s("small",ce,m(e(l).price),1)]),s("div",me,[ue,o(e(n),{modelValue:e(f),"onUpdate:modelValue":t[2]||(t[2]=a=>d(f)?f.value=a:null),id:"description",type:"text",class:r({"p-invalid":e(l).description})},null,8,["modelValue","class"]),s("small",_e,m(e(l).description),1)]),s("div",pe,[ve,o(e(n),{modelValue:e(b),"onUpdate:modelValue":t[3]||(t[3]=a=>d(b)?b.value=a:null),id:"max_qtd",type:"number",class:r({"p-invalid":e(l).max_qtd})},null,8,["modelValue","class"]),o(e(n),{modelValue:e(v),"onUpdate:modelValue":t[4]||(t[4]=a=>d(v)?v.value=a:null),id:"event_id",type:"hidden",class:r({"p-invalid":e(l).event_id})},null,8,["modelValue","class"]),s("small",he,m(e(l).max_qtd),1)]),s("div",fe,[s("div",be,[Ve,o(e(n),{modelValue:e(V),"onUpdate:modelValue":t[5]||(t[5]=a=>d(V)?V.value=a:null),id:"start_date",type:"date",class:r({"p-invalid":e(l).start_date})},null,8,["modelValue","class"]),s("small",ge,m(e(l).start_date),1)]),s("div",xe,[ye,o(e(n),{modelValue:e(g),"onUpdate:modelValue":t[6]||(t[6]=a=>d(g)?g.value=a:null),id:"start_time",type:"time",class:r({"p-invalid":e(l).start_time})},null,8,["modelValue","class"]),s("small",ke,m(e(l).start_time),1)])]),s("div",qe,[s("div",Ce,[Be,o(e(n),{modelValue:e(x),"onUpdate:modelValue":t[7]||(t[7]=a=>d(x)?x.value=a:null),id:"end_date",type:"date",class:r({"p-invalid":e(l).end_date})},null,8,["modelValue","class"]),s("small",De,m(e(l).end_date),1)]),s("div",Se,[Ue,o(e(n),{modelValue:e(y),"onUpdate:modelValue":t[8]||(t[8]=a=>d(y)?y.value=a:null),id:"end_time",type:"time",class:r({"p-invalid":e(l).end_time})},null,8,["modelValue","class"]),s("small",Ne,m(e(l).end_time),1)])])]),o(S,{label:"Submeter",class:"mr-2 mb-2",onClick:e(q),disabled:_.value},null,8,["onClick","disabled"]),_.value?(C(),W(U,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):j("",!0)])],32)])]))}}};export{Ie as default};
