import{u as E,r,a as I,h as U,o as M,b as q,c as x,d as D,e,f as t,w as W,g as s,n as m,p as u,t as b,k as j,l as z,j as A,s as v,q as G}from"./index-b670bd76.js";import{b as w}from"./APIConstant-43486e71.js";import{u as O}from"./vee-validate.esm-a565d278.js";import{c as H,a as p}from"./index.esm-a7e89c92.js";import"./moment-a9aaa855.js";const J={key:0,className:"card"},K={class:"col-12"},Q={class:"card-w-title"},X=e("i",{class:"pi pi-angle-left"},null,-1),Y=e("h5",null,"Criar Barman",-1),Z=e("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),ee={class:"col-12 md:col-12"},se={class:"card p-fluid"},ae=e("h5",null,"Formulário Criação de Barman",-1),oe=e("h5",null,"Informação Geral",-1),le={class:"field"},te=e("label",{for:"name"},"Nome",-1),ie={id:"name-help",class:"p-error"},re={class:"field"},ne=e("label",{for:"name"},"Telefone",-1),de={id:"mobile-help",class:"p-error"},ce={class:"field"},me=e("label",{for:"bi"},"Bilhete de Identificação",-1),ue={id:"bi-help",class:"p-error"},pe={class:"field"},_e=e("label",{for:"bar_store_id"},"Bar",-1),be={id:"bar_store_id-help",class:"p-error"},ve={key:1,class:"text-center"},fe=e("p",null,"Por Favor Aguarde...",-1),xe={__name:"CreateBarman",setup(he){const n=E(),f=r(!0),d=r(!1),C=r([]);r([]),r([]),r([]);const h=I();function S(){n&&n.back()}const F=H({name:p().required().trim().label("Nome"),bi:p().required().trim().label("BI"),mobile:p().required().trim().label("Telefone"),event_id:p().required().label("Evento"),bar_store_id:p().required().label("Bar")}),{defineField:c,handleSubmit:P,resetForm:R,errors:l,setErrors:T}=O({validationSchema:F}),[g]=c("name"),[_]=c("event_id"),[V]=c("bi"),[y]=c("mobile"),[B]=c("bar_store_id"),k=P(i=>{d.value=!0,U.post(`${w}/promotor-barman`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{R(),n.back(),h.add({severity:"success",summary:"Successo",detail:"Barman criado com sucesso",life:3e3})}).catch(a=>{d.value=!1,h.add({severity:"error",summary:`${a.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),a.response.data.errors&&T(a.response.data.errors)}).finally(()=>{d.value=!1})}),L=()=>{U.get(`${w}/auxiliar-event/${n.currentRoute.value.params.id}`).then(i=>{C.value=i.data.barstore,f.value=!1}).catch(i=>{f.value=!1,id,h.add({severity:"error",summary:`${i}`,detail:"Message Detail",life:3e3}),S()})};return M(()=>{_.value=n.currentRoute.value.params.id,L()}),(i,a)=>{const $=q("Button"),N=q("ProgressSpinner");return f.value?(x(),D("div",ve,[t(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),fe])):(x(),D("div",J,[e("div",K,[e("div",Q,[t($,{label:"Voltar",class:"mr-2 mb-2",onClick:S},{default:W(()=>[X,A(" Voltar")]),_:1}),Y]),Z,e("form",{onSubmit:a[5]||(a[5]=(...o)=>s(k)&&s(k)(...o))},[e("div",ee,[e("div",se,[ae,oe,e("div",le,[te,t(s(v),{modelValue:s(g),"onUpdate:modelValue":a[0]||(a[0]=o=>m(g)?g.value=o:null),id:"name",type:"text",class:u({"p-invalid":s(l).name})},null,8,["modelValue","class"]),t(s(v),{modelValue:s(_),"onUpdate:modelValue":a[1]||(a[1]=o=>m(_)?_.value=o:null),id:"event_id",type:"hidden",class:u({"p-invalid":s(l).event_id})},null,8,["modelValue","class"]),e("small",ie,b(s(l).name),1)]),e("div",re,[ne,t(s(v),{modelValue:s(y),"onUpdate:modelValue":a[2]||(a[2]=o=>m(y)?y.value=o:null),id:"mobile",type:"text",class:u({"p-invalid":s(l).mobile})},null,8,["modelValue","class"]),e("small",de,b(s(l).mobile),1)]),e("div",ce,[me,t(s(v),{modelValue:s(V),"onUpdate:modelValue":a[3]||(a[3]=o=>m(V)?V.value=o:null),id:"bi",type:"text",class:u({"p-invalid":s(l).bi})},null,8,["modelValue","class"]),e("small",ue,b(s(l).bi),1)]),e("div",pe,[_e,t(s(G),{modelValue:s(B),"onUpdate:modelValue":a[4]||(a[4]=o=>m(B)?B.value=o:null),options:C.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:u({"p-invalid":s(l).bar_store_id})},null,8,["modelValue","options","class"]),e("small",be,b(s(l).bar_store_id),1)])]),t($,{label:"Submeter",class:"mr-2 mb-2",onClick:s(k),disabled:d.value},null,8,["onClick","disabled"]),d.value?(x(),j(N,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):z("",!0)])],32)])]))}}};export{xe as default};
