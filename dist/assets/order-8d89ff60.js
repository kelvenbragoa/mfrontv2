import{r as l,_ as L,u as F,a as j,G as $,h as A,o as V,b as B,c as x,d as C,e,f as H,F as N,D as P,t as n,n as z,g as f,j as R,p as U,q as Y}from"./index-4c06444b.js";import{b as Q,s as G,a as J}from"./APIConstant-7cd3c3b1.js";import{h as b}from"./moment-a9aaa855.js";import"./vue-numeric.min-d04337f7.js";import{u as O}from"./vee-validate.esm-153206bd.js";import{c as K,a as E}from"./index.esm-7b5acfa1.js";import{Q as X}from"./qrcode.vue.esm-38d4bd8e.js";const Z=t=>{const s=l(),r=window.document.getElementById(t);if(r)s.value=r;else throw new Error(`Element with id '${t}' was not found.`);return{selectedElement:s}},ee=t=>{var s;const r="_blank",a=["fullscreen=yes","titlebar=yes","scrollbars=yes"],c=window.document.title,i=!0,m=!0,p=l(""),d=l(""),_=l(""),v=l(!0),g=l(""),w=l(!0),S=M=>M==null?void 0:M.filter(T=>T);return p.value=(t==null?void 0:t.target)||r,d.value=(s=S((t==null?void 0:t.features)||a))==null?void 0:s.join(","),_.value=(t==null?void 0:t.windowTitle)||c,v.value=(t==null?void 0:t.autoClose)??i,g.value=(t==null?void 0:t.bodyClass)??"",w.value=(t==null?void 0:t.autoPrint)??m,{target:p.value,features:d.value,windowTitle:_.value,autoClose:v.value,bodyClass:g.value,autoPrint:w.value}},te=()=>({attachStyles:(t,s=[])=>{s.length&&s.forEach(r=>{let a=t.document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",r),t.document.getElementsByTagName("head")[0].appendChild(a)})}}),se=(t,s)=>{const r=l(),a=window.open("",t,s);return a&&(a.opener||(a.opener=self),a.focus(),r.value=a),{previewWindow:r}},ae=()=>({writeWindowContent:(t,s,r)=>{t.document.write(`
      <html>
        <head>
          <title>${t.document.title}</title>
        </head>
        <body class="${r}">
          ${s.innerHTML}
        </body>
      </html>
    `)}}),oe=(t,s,r=()=>{})=>{const a=c=>{const{target:i,features:m,windowTitle:p,autoClose:d,bodyClass:_,autoPrint:v}=ee(c),{previewWindow:g}=se(i,m);return{defaultWindow:g.value,target:i,windowTitle:p,autoClose:d,bodyClass:_,autoPrint:v}};return{paperize:()=>{const{selectedElement:c}=Z(t),{defaultWindow:i,target:m,windowTitle:p,autoClose:d,bodyClass:_,autoPrint:v}=a(s),{writeWindowContent:g}=ae(),{attachStyles:w}=te();i&&c.value&&(i.document.title=p||document.title,g(i,c.value,_),w(i,s==null?void 0:s.styles),setTimeout(()=>{i.document.close(),i.focus(),v&&(i.print(),setTimeout(function(){m==="_blank"&&d&&i.close()},1)),r()},1e3))}}};const y=t=>(U("data-v-690e2e2e"),t=t(),Y(),t),ne={key:0,id:"features",class:"py-4 px-4 lg:px-8 mt-5 mx-0 lg:mx-8"},le={class:"grid justify-content-left"},re=y(()=>e("div",{class:"col-12 text-left mt-8 mb-4"},[e("h2",{class:"text-900 font-normal mb-2"},"Minha Encomenda")],-1)),ie={class:"col-12 md:col-12 lg:col-12 p-0 lg:pr-5 lg:pb-5 mt-4 lg:mt-0"},de={style:{padding:"2px","border-radius":"10px",background:"linear-gradient(90deg, rgba(253, 228, 165, 0.2), rgba(187, 199, 205, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(187, 199, 205, 0.2))"}},ce={class:"p-3 surface-card h-full",style:{"border-radius":"8px"}},ue=y(()=>e("h2",{class:"text-900 font-normal mb-2"},"Minha Encomenda",-1)),me={class:"left"},pe=y(()=>e("p",{class:"admit-one"},[e("span",null,"Mticket"),e("span",null,"Mticket"),e("span",null,"Mticket")],-1)),_e={class:"ticket-number"},ve={class:"ticket-info"},he={class:"date"},fe={class:"june-29"},ge={class:"show-name"},be=y(()=>e("br",null,null,-1)),ye={class:"cardticket"},we={class:"time"},ke={class:"location"},xe=y(()=>e("span",{class:"separator"},null,-1)),Ce={class:"right"},Me=y(()=>e("p",{class:"admit-one"},[e("span",null,"Mticket"),e("span",null,"Mticket"),e("span",null,"Mticket")],-1)),Ee={class:"right-info-container"},Se={class:"show-name"},Te={class:"time"},He={class:"barcode"},$e={class:"ticket-number"},Be={key:1,class:"text-center"},Ne=y(()=>e("p",null,"Por Favor Aguarde...",-1)),Pe={__name:"order",props:["data"],setup(t){const s=F(),r=l(!0),a=l(!1);l(!1),l();const c=l(),i=j();l([]),l([]),l(0);const m=l([]),p=K({customerName:E().required().trim().label("Nome"),customerEmail:E().required().trim().label("Email"),customerMobile:E().required().trim().label("Telefone"),paymentNumber:E().required().label("Telefone")}),{defineField:d,handleSubmit:_,resetForm:v,errors:g,setErrors:w}=O({validationSchema:p});d("customerName"),d("customerEmail"),d("customerMobile"),d("paymentNumber");function S(){s&&s.back()}$(()=>c.value.reduce((h,u)=>h+u.quantity,0));const M=$(()=>c.value.reduce((h,u)=>h+u.quantity*u.price,0));_(h=>{h.tickets=c.value,h.amount=M.value,a.value=!0,A.post(`${Q}/checkout`,h,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{v(),i.add({severity:"success",summary:"Successo",detail:"A sua compra foi efetuada com sucesso",life:3e3})}).catch(u=>{a.value=!1,i.add({severity:"error",summary:`${u.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),u.response.data.errors&&w(u.response.data.errors)}).finally(()=>{a.value=!1})});const T=()=>{m.value=JSON.parse(localStorage.getItem("order")),m.value?(r.value=!1,localStorage.removeItem("order")):S()},{paperize:q}=oe("myticket",{styles:["https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css",`${J}/ticket.css`]}),D=()=>{q()};return V(()=>{T()}),(h,u)=>{const I=B("Button"),W=B("ProgressSpinner");return r.value?(x(),C("div",Be,[H(W,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),Ne])):(x(),C("div",ne,[e("div",le,[re,e("div",ie,[e("div",de,[e("div",ce,[ue,H(I,{label:"Baixar",onClick:D,class:"p-button-rounded border-none font-light text-white line-height-2 bg-blue-500"}),(x(!0),C(N,null,P(m.value,(o,qe)=>(x(),C("div",{key:o.id,id:"myticket"},[e("p",null,"Encomenda da Venda ID: #"+n(o.id),1),(x(!0),C(N,null,P(o.selldetails,(k,De)=>(x(),C("div",{class:"ticket",key:k.id},[e("div",me,[e("div",{class:"image",style:z(`background-image: url(${f(G)}${o.event.image})`)},[pe,e("div",_e,[e("p",null,"#0"+n(k.id),1)])],4),e("div",ve,[e("p",he,[e("span",null,n(f(b)(o.event.start_date).format("dddd")),1),e("span",fe,n(f(b)(o.event.start_date).format("D"))+" - "+n(f(b)(o.event.start_date).format("MM")),1),e("span",null,n(f(b)(o.event.start_date).format("YYYY")),1)]),e("div",ge,[e("h1",null,n(o.event.name),1),be,e("h2",null,n(o.name),1),e("h2",null,n(o.ticket.name),1),e("div",ye,[e("p",null,n(o.ticket.description),1)])]),e("div",we,[e("p",null,n(f(b)(o.event.start_time,"HH:mm:ss").format("HH:mm")),1)]),e("p",ke,[e("span",null,n(o.event.address),1),R(),xe,e("span",null,n(o.event.province.name)+", Moçambique",1)])])]),e("div",Ce,[Me,e("div",Ee,[e("div",Se,[e("h1",null,n(o.event.name),1)]),e("div",Te,[e("p",null,n(f(b)(o.event.start_time,"HH:mm:ss").format("HH:mm"))+" até "+n(f(b)(o.event.end_time,"HH:mm:ss").format("HH:mm")),1)]),e("div",He,[H(X,{value:`{"s":${k.status},"i":${k.id},"ie":${k.event_id}}`,size:100,level:"H","render-as":"svg"},null,8,["value"])]),e("p",$e,"#0"+n(k.id),1)])])]))),128))]))),128))])])])])]))}}},ze=L(Pe,[["__scopeId","data-v-690e2e2e"]]);export{ze as default};
