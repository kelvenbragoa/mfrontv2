import{u as W,r as d,a as j,h as U,o as z,b as N,c as B,d as E,e as s,f as t,w as A,g as e,s as u,v as c,t as v,k as G,l as I,j as O,x as b,y as Q}from"./index-da4e25fd.js";import{b as w}from"./APIConstant-3b96cd31.js";import{u as H}from"./vee-validate.esm-f9eb7de3.js";import{c as J,a as m}from"./index.esm-8e4dfa6c.js";import"./moment-a9aaa855.js";const K={key:0,className:"card"},X={class:"col-12"},Y={class:"card-w-title"},Z=s("i",{class:"pi pi-angle-left"},null,-1),ee=s("h5",null,"Editar Bar",-1),se=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),ae={class:"col-12 md:col-12"},le={class:"card p-fluid"},oe=s("h5",null,"Formulário Edição de Bares",-1),te=s("h5",null,"Informação Geral",-1),re={class:"field"},ie=s("label",{for:"name"},"Nome",-1),de={id:"name-help",class:"p-error"},ne={class:"field"},ue=s("label",{for:"buy_price"},"Preço de Compra",-1),ce={id:"buy_price-help",class:"p-error"},me={class:"field"},pe=s("label",{for:"sell_price"},"Preço de Venda",-1),_e={id:"sell_price-help",class:"p-error"},ve={class:"field"},be=s("label",{for:"qtd"},"Quantidade",-1),fe={id:"qtd-help",class:"p-error"},he={class:"field"},ye=s("label",{for:"bar_store_id"},"Bar",-1),Ve={id:"bar_store_id-help",class:"p-error"},ge={key:1,class:"text-center"},ke=s("p",null,"Por Favor Aguarde...",-1),$e={__name:"EditProdutos",setup(qe){const p=W(),q=d(!1),_=d(!1),r=d();d([]);const S=d([]);d([]),d([]);const x=j();function C(){p&&p.back()}const F=J({name:m().required().trim().label("Nome"),sell_price:m().required().trim().label("Preco"),buy_price:m().required().trim().label("Preco"),qtd:m().required().trim().label("Preco"),bar_store_id:m().required().trim().label("Preco"),event_id:m().required().label("Evento")}),{defineField:n,handleSubmit:R,resetForm:L,errors:o,setErrors:M}=H({validationSchema:F}),[f]=n("name"),[h]=n("event_id"),[y]=n("qtd"),[V]=n("sell_price"),[g]=n("buy_price"),[k]=n("bar_store_id"),P=R(i=>{_.value=!0,U.put(`${w}/promotor-products/${p.currentRoute.value.params.idproduto}`,i).then(a=>{L(),p.back(),x.add({severity:"success",summary:"Successo",detail:"Produto alterado com sucesso",life:3e3})}).catch(a=>{_.value=!1,x.add({severity:"error",summary:`${a.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),a.response.data.errors&&M(a.response.data.errors)}).finally(()=>{_.value=!1})}),T=()=>{U.get(`${w}/promotor-products/${p.currentRoute.value.params.idproduto}/edit`).then(i=>{r.value=i.data.product,f.value=r.value.name,h.value=r.value.event_id,y.value=r.value.qtd,V.value=r.value.sell_price,g.value=r.value.buy_price,k.value=r.value.bar_store_id,S.value=i.data.bar,q.value=!1}).catch(i=>{q.value=!1,x.add({severity:"error",summary:`${i}`,detail:"Message Detail",life:3e3}),C()})};return z(()=>{T()}),(i,a)=>{const $=N("Button"),D=N("ProgressSpinner");return q.value?(B(),E("div",ge,[t(D,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ke])):(B(),E("div",K,[s("div",X,[s("div",Y,[t($,{label:"Voltar",class:"mr-2 mb-2",onClick:C},{default:A(()=>[Z,O(" Voltar")]),_:1}),ee]),se,s("form",{onSubmit:a[6]||(a[6]=(...l)=>e(P)&&e(P)(...l))},[s("div",ae,[s("div",le,[oe,te,s("div",re,[ie,t(e(b),{modelValue:e(f),"onUpdate:modelValue":a[0]||(a[0]=l=>u(f)?f.value=l:null),id:"name",type:"text",class:c({"p-invalid":e(o).name})},null,8,["modelValue","class"]),t(e(b),{modelValue:e(h),"onUpdate:modelValue":a[1]||(a[1]=l=>u(h)?h.value=l:null),id:"name",type:"hidden",class:c({"p-invalid":e(o).name})},null,8,["modelValue","class"]),s("small",de,v(e(o).name),1)]),s("div",ne,[ue,t(e(b),{modelValue:e(g),"onUpdate:modelValue":a[2]||(a[2]=l=>u(g)?g.value=l:null),id:"buy_price",type:"text",class:c({"p-invalid":e(o).buy_price})},null,8,["modelValue","class"]),s("small",ce,v(e(o).buy_price),1)]),s("div",me,[pe,t(e(b),{modelValue:e(V),"onUpdate:modelValue":a[3]||(a[3]=l=>u(V)?V.value=l:null),id:"sell_price",type:"text",class:c({"p-invalid":e(o).sell_price})},null,8,["modelValue","class"]),s("small",_e,v(e(o).sell_price),1)]),s("div",ve,[be,t(e(b),{modelValue:e(y),"onUpdate:modelValue":a[4]||(a[4]=l=>u(y)?y.value=l:null),id:"qtd",type:"text",class:c({"p-invalid":e(o).qtd})},null,8,["modelValue","class"]),s("small",fe,v(e(o).qtd),1)]),s("div",he,[ye,t(e(Q),{modelValue:e(k),"onUpdate:modelValue":a[5]||(a[5]=l=>u(k)?k.value=l:null),options:S.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:c({"p-invalid":e(o).bar_store_id})},null,8,["modelValue","options","class"]),s("small",Ve,v(e(o).bar_store_id),1)])]),t($,{label:"Submeter",class:"mr-2 mb-2",onClick:e(P),disabled:_.value},null,8,["onClick","disabled"]),_.value?(B(),G(D,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):I("",!0)])],32)])]))}}};export{$e as default};
