import{u as A,r as a,a as Q,h as $,o as W,b as P,c as S,d as L,e,j as u,t as n,f as l,w as j,g as t,s as N,k as G,l as H,Q as J,v as K}from"./index-da4e25fd.js";import{b as I,l as X}from"./APIConstant-3b96cd31.js";import{u as Y}from"./vee-validate.esm-f9eb7de3.js";import{c as Z,a as U,d as ee}from"./index.esm-8e4dfa6c.js";import"./moment-a9aaa855.js";import"./lodash-a8a05f48.js";const se={key:0,class:"grid"},oe={class:"col-12 lg:col-6 xl:col-4"},ae={className:"card"},le=e("div",{className:"text-center"},[e("h5",null,"Perfil do Usuario"),e("img",{src:J,alt:"Image",height:"100",class:"mb-3 circle"})],-1),te=e("hr",null,null,-1),de=e("strong",null,"Nome:",-1),ne=e("strong",null,"Email:",-1),ie=e("strong",null,"Mobile:",-1),re=e("strong",null,"Nivel:",-1),ue={class:"col-12 lg:col-6 xl:col-8"},ce={className:"card"},me=e("h5",null,"Atualizar dados do usuario",-1),_e=e("p",null,"Utilize o formulario para atualizar seus dados",-1),pe={class:"col-12 md:col-12"},ve={class:"card p-fluid"},fe=e("p",null,"Dados do usuario",-1),he={class:"field"},we=e("label",{for:"name"},"Nome",-1),ge={class:"field"},be=e("label",{for:"email"},"Email",-1),Ve={class:"field"},xe=e("label",{for:"mobile"},"Telefone",-1),ye={class:"field"},ke=e("label",{for:"role"},"Nivel",-1),Pe=e("p",null,"Atualizar a palavra passe",-1),Se={class:"field"},Ne=e("label",{for:"old_password"},"Palavra passe antiga",-1),Ue={id:"old_password-help",class:"p-error"},Be={class:"field"},Ce=e("label",{for:"new_password"},"Nova palavra passe",-1),De={id:"new_password-help",class:"p-error"},$e={class:"field"},Le=e("label",{for:"new_password_confirmation"},"Repetir a palavra passe",-1),Ie={id:"new_password_confirmation-help",class:"p-error"},ze={class:"col-12 md:col-2"},Te={key:1,class:"text-center"},qe=e("p",null,"Por Favor Aguarde...",-1),We={__name:"IndexProfile",setup(Ee){const B=A(),m=a(!0),c=a(!1),i=a(!1),r=a({data:[]});a({data:[]});const _=Q(),z=a(null);a(),a(!1),a(!1);const p=a(),v=a(),f=a(),h=a();function T(){B&&B.back()}a(!1),a(null);const q=Z({old_password:U().required().min(6).label("Password"),new_password:U().required().min(6).label("Password"),new_password_confirmation:U().oneOf([ee("new_password")],"Passwords must match").required().label("Password confirmation")}),{defineField:w,handleSubmit:E,resetForm:F,errors:g,setErrors:M}=Y({validationSchema:q}),[b]=w("old_password"),[V]=w("new_password"),[x]=w("new_password_confirmation"),y=E(k=>{i.value=!0,$.post(`${I}/updatepassword`,k).then(s=>{F(),_.add({severity:"success",summary:"Successo",detail:"Password editado com sucesso",life:3e3})}).catch(s=>{i.value=!1,_.add({severity:"error",summary:`${s.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),s.response.data.errors&&M(s.response.data.errors)}).finally(()=>{i.value=!1})}),O=async(k=1)=>{$.get(`${I}/promotor-profile`,{params:{query:z.value}}).then(s=>{r.value=s.data.user,p.value=s.data.user.name,v.value=s.data.user.email,f.value=s.data.user.mobile,h.value=s.data.user.role.name,m.value=!1}).catch(s=>{m.value=!1,_.add({severity:"error",summary:`${s}`,detail:"Message Detail",life:3e3}),T(),localStorage.removeItem("token"),localStorage.removeItem("user")})},R=()=>{c.value=!0,X(),c.value=!1};return W(()=>{O()}),(k,s)=>{const C=P("Button"),d=P("InputText"),D=P("ProgressSpinner");return m.value?(S(),L("div",Te,[l(D,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),qe])):(S(),L("div",se,[e("div",oe,[e("div",ae,[le,te,e("p",null,[de,u(" "+n(r.value.name),1)]),e("p",null,[ne,u(" "+n(r.value.email),1)]),e("p",null,[ie,u(" "+n(r.value.mobile),1)]),e("p",null,[re,u(" "+n(r.value.role.name),1)]),l(C,{label:"LogOut",class:"mr-2 mb-2",onClick:s[0]||(s[0]=o=>R()),disabled:c.value},{default:j(()=>[e("i",{class:K(c.value?"pi pi-spinner":"pi pi-sign-out")},null,2),u("LogOut")]),_:1},8,["disabled"])])]),e("div",ue,[e("div",ce,[me,_e,e("div",pe,[e("div",ve,[fe,e("div",he,[we,l(d,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=o=>p.value=o),id:"name",type:"text",disabled:""},null,8,["modelValue"])]),e("div",ge,[be,l(d,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=o=>v.value=o),id:"email",type:"text",disabled:""},null,8,["modelValue"])]),e("div",Ve,[xe,l(d,{modelValue:f.value,"onUpdate:modelValue":s[3]||(s[3]=o=>f.value=o),id:"mobile",type:"text",disabled:""},null,8,["modelValue"])]),e("div",ye,[ke,l(d,{modelValue:h.value,"onUpdate:modelValue":s[4]||(s[4]=o=>h.value=o),id:"role",type:"text",disabled:""},null,8,["modelValue"])]),Pe,e("form",{onSubmit:s[8]||(s[8]=(...o)=>t(y)&&t(y)(...o))},[e("div",Se,[Ne,l(d,{modelValue:t(b),"onUpdate:modelValue":s[5]||(s[5]=o=>N(b)?b.value=o:null),id:"old_password",type:"text"},null,8,["modelValue"]),e("small",Ue,n(t(g).old_password),1)]),e("div",Be,[Ce,l(d,{modelValue:t(V),"onUpdate:modelValue":s[6]||(s[6]=o=>N(V)?V.value=o:null),id:"new_password",type:"text"},null,8,["modelValue"]),e("small",De,n(t(g).new_password),1)]),e("div",$e,[Le,l(d,{modelValue:t(x),"onUpdate:modelValue":s[7]||(s[7]=o=>N(x)?x.value=o:null),id:"new_password_confirmation",type:"text"},null,8,["modelValue"]),e("small",Ie,n(t(g).new_password_confirmation),1)]),e("div",ze,[l(C,{label:"Submeter",class:"mr-2 mb-2",onClick:t(y),disabled:i.value},null,8,["onClick","disabled"]),i.value?(S(),G(D,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):H("",!0)])],32)])])])])]))}}};export{We as default};
