import{u as L,r as t,a as M,h as D,o as T,b as B,c as g,d as $,e,f as i,w as W,g as s,s as k,v as y,t as V,k as j,l as z,j as A,x}from"./index-4c06444b.js";import{b as N}from"./APIConstant-7cd3c3b1.js";import{u as G}from"./vee-validate.esm-153206bd.js";import{c as I,a as v}from"./index.esm-7b5acfa1.js";import"./moment-a9aaa855.js";const O={key:0,className:"card"},H={class:"col-12"},J={class:"card-w-title"},K=e("i",{class:"pi pi-angle-left"},null,-1),Q=e("h5",null,"Editar Pacotes",-1),X=e("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),Y={class:"col-12 md:col-12"},Z={class:"card p-fluid"},ee=e("h5",null,"Formulário Criação de Pacotes",-1),se=e("h5",null,"Informação Geral",-1),ae={class:"field"},oe=e("label",{for:"name"},"Nome",-1),te={id:"name-help",class:"p-error"},le={class:"field"},re=e("label",{for:"price"},"Preço",-1),ie={id:"price-help",class:"p-error"},ne={class:"field"},ce=e("label",{for:"description"},"Descrição",-1),de={id:"description-help",class:"p-error"},ue={key:1,class:"text-center"},me=e("p",null,"Por Favor Aguarde...",-1),ge={__name:"EditPacotes",setup(pe){const n=L(),f=t(!1),c=t(!1),d=t();t([]),t([]),t([]),t([]);const h=M();function P(){n&&n.back()}const w=I({name:v().required().trim().label("Nome"),price:v().required().trim().label("Preco"),description:v().required().trim().label("Descricao"),event_id:v().required().label("Evento")}),{defineField:u,handleSubmit:E,resetForm:F,errors:l,setErrors:R}=G({validationSchema:w}),[m]=u("name"),[U]=u("event_id"),[p]=u("description"),[_]=u("price"),b=E(r=>{c.value=!0,D.put(`${N}/promotor-packages/${n.currentRoute.value.params.idpacotes}`,r).then(a=>{F(),n.back(),h.add({severity:"success",summary:"Successo",detail:"Pacote alterado com sucesso",life:3e3})}).catch(a=>{c.value=!1,h.add({severity:"error",summary:`${a.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),a.response.data.errors&&R(a.response.data.errors)}).finally(()=>{c.value=!1})}),q=()=>{D.get(`${N}/promotor-packages/${n.currentRoute.value.params.idpacotes}/edit`).then(r=>{d.value=r.data.package,m.value=d.value.name,U.value=d.value.event_id,_.value=d.value.price,p.value=d.value.description,f.value=!1}).catch(r=>{f.value=!1,h.add({severity:"error",summary:`${r}`,detail:"Message Detail",life:3e3}),P()})};return T(()=>{q()}),(r,a)=>{const S=B("Button"),C=B("ProgressSpinner");return f.value?(g(),$("div",ue,[i(C,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),me])):(g(),$("div",O,[e("div",H,[e("div",J,[i(S,{label:"Voltar",class:"mr-2 mb-2",onClick:P},{default:W(()=>[K,A(" Voltar")]),_:1}),Q]),X,e("form",{onSubmit:a[3]||(a[3]=(...o)=>s(b)&&s(b)(...o))},[e("div",Y,[e("div",Z,[ee,se,e("div",ae,[oe,i(s(x),{modelValue:s(m),"onUpdate:modelValue":a[0]||(a[0]=o=>k(m)?m.value=o:null),id:"name",type:"text",class:y({"p-invalid":s(l).name})},null,8,["modelValue","class"]),e("small",te,V(s(l).name),1)]),e("div",le,[re,i(s(x),{modelValue:s(_),"onUpdate:modelValue":a[1]||(a[1]=o=>k(_)?_.value=o:null),id:"price",type:"number",class:y({"p-invalid":s(l).price})},null,8,["modelValue","class"]),e("small",ie,V(s(l).price),1)]),e("div",ne,[ce,i(s(x),{modelValue:s(p),"onUpdate:modelValue":a[2]||(a[2]=o=>k(p)?p.value=o:null),id:"description",type:"text",class:y({"p-invalid":s(l).description})},null,8,["modelValue","class"]),e("small",de,V(s(l).description),1)])]),i(S,{label:"Submeter",class:"mr-2 mb-2",onClick:s(b),disabled:c.value},null,8,["onClick","disabled"]),c.value?(g(),j(C,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):z("",!0)])],32)])]))}}};export{ge as default};
