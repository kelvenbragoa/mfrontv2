import{u as E,r as u,a as L,h as M,o as Q,b as B,c as C,d as P,e,f as o,w as W,g as s,n as d,p as c,t as n,k as j,l as z,j as A,s as m}from"./index-b670bd76.js";import{b as G}from"./APIConstant-43486e71.js";import{u as O}from"./vee-validate.esm-a565d278.js";import{c as J,a as r}from"./index.esm-a7e89c92.js";import"./moment-a9aaa855.js";const K={key:0,className:"card"},X={class:"col-12"},Y={class:"card-w-title"},Z=e("i",{class:"pi pi-angle-left"},null,-1),ee=e("h5",null,"Criar Ticket",-1),se=e("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),te={class:"col-12 md:col-12"},ae={class:"card p-fluid"},le=e("h5",null,"Formulário Criação de Bilhetes",-1),oe=e("h5",null,"Informação Geral",-1),ie={class:"field"},de=e("label",{for:"name"},"Nome",-1),re={id:"name-help",class:"p-error"},ne={class:"field"},ce=e("label",{for:"price"},"Preço",-1),me={id:"price-help",class:"p-error"},ue={class:"field"},_e=e("label",{for:"description"},"Descrição",-1),pe={id:"description-help",class:"p-error"},he={class:"field"},ve=e("label",{for:"max_qtd"},"Quantidade Máxima",-1),fe={id:"max_qtd-help",class:"p-error"},be={class:"formgrid grid"},Ve={class:"field col"},ge=e("label",{for:"start_date"},"Data de Inicio",-1),xe={id:"start_date-help",class:"p-error"},ye={class:"field col"},ke=e("label",{for:"start_time"},"Horas de Inicio",-1),qe={id:"start_time-help",class:"p-error"},Be={class:"formgrid grid"},Ce={class:"field col"},De=e("label",{for:"end_date"},"Data de Termino",-1),Se={id:"end_date-help",class:"p-error"},Ue={class:"field col"},we=e("label",{for:"end_time"},"Horas de Termino",-1),Ne={id:"end_time-help",class:"p-error"},Pe={key:1,class:"text-center"},Te=e("p",null,"Por Favor Aguarde...",-1),Le={__name:"CreateBilhetes",setup(Fe){const p=E(),T=u(!1),_=u(!1);u([]),u([]),u([]),u([]);const D=L();function F(){p&&p.back()}const I=J({name:r().required().trim().label("Nome"),price:r().required().trim().label("Preco"),description:r().required().trim().label("Descricao"),max_qtd:r().required().label("Quantidade"),event_id:r().required().label("Evento"),start_date:r().required().label("Data"),start_time:r().required().label("Horas"),end_date:r().required().label("Data"),end_time:r().required().label("Horas")}),{defineField:i,handleSubmit:H,resetForm:R,errors:l,setErrors:$}=O({validationSchema:I}),[v]=i("name"),[h]=i("event_id"),[f]=i("description"),[b]=i("max_qtd"),[V]=i("start_date"),[g]=i("start_time"),[x]=i("end_date"),[y]=i("end_time"),[k]=i("price"),q=H(S=>{_.value=!0,M.post(`${G}/promotor-tickets`,S,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{R(),p.back(),D.add({severity:"success",summary:"Successo",detail:"Bilhete criado com sucesso",life:3e3})}).catch(t=>{_.value=!1,D.add({severity:"error",summary:`${t.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),t.response.data.errors&&$(t.response.data.errors)}).finally(()=>{_.value=!1})});return Q(()=>{h.value=p.currentRoute.value.params.id}),(S,t)=>{const U=B("Button"),w=B("Calendar"),N=B("ProgressSpinner");return T.value?(C(),P("div",Pe,[o(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),Te])):(C(),P("div",K,[e("div",X,[e("div",Y,[o(U,{label:"Voltar",class:"mr-2 mb-2",onClick:F},{default:W(()=>[Z,A(" Voltar")]),_:1}),ee]),se,e("form",{onSubmit:t[9]||(t[9]=(...a)=>s(q)&&s(q)(...a))},[e("div",te,[e("div",ae,[le,oe,e("div",ie,[de,o(s(m),{modelValue:s(v),"onUpdate:modelValue":t[0]||(t[0]=a=>d(v)?v.value=a:null),id:"name",type:"text",class:c({"p-invalid":s(l).name})},null,8,["modelValue","class"]),e("small",re,n(s(l).name),1)]),e("div",ne,[ce,o(s(m),{modelValue:s(k),"onUpdate:modelValue":t[1]||(t[1]=a=>d(k)?k.value=a:null),id:"price",type:"number",class:c({"p-invalid":s(l).price})},null,8,["modelValue","class"]),e("small",me,n(s(l).price),1)]),e("div",ue,[_e,o(s(m),{modelValue:s(f),"onUpdate:modelValue":t[2]||(t[2]=a=>d(f)?f.value=a:null),id:"description",type:"text",class:c({"p-invalid":s(l).description})},null,8,["modelValue","class"]),e("small",pe,n(s(l).description),1)]),e("div",he,[ve,o(s(m),{modelValue:s(b),"onUpdate:modelValue":t[3]||(t[3]=a=>d(b)?b.value=a:null),id:"max_qtd",type:"number",class:c({"p-invalid":s(l).max_qtd})},null,8,["modelValue","class"]),o(s(m),{modelValue:s(h),"onUpdate:modelValue":t[4]||(t[4]=a=>d(h)?h.value=a:null),id:"event_id",type:"hidden",class:c({"p-invalid":s(l).event_id})},null,8,["modelValue","class"]),e("small",fe,n(s(l).max_qtd),1)]),e("div",be,[e("div",Ve,[ge,o(w,{showIcon:!0,showButtonBar:!0,modelValue:s(V),"onUpdate:modelValue":t[5]||(t[5]=a=>d(V)?V.value=a:null)},null,8,["modelValue"]),e("small",xe,n(s(l).start_date),1)]),e("div",ye,[ke,o(s(m),{modelValue:s(g),"onUpdate:modelValue":t[6]||(t[6]=a=>d(g)?g.value=a:null),id:"start_time",type:"time",class:c({"p-invalid":s(l).start_time})},null,8,["modelValue","class"]),e("small",qe,n(s(l).start_time),1)])]),e("div",Be,[e("div",Ce,[De,o(w,{showIcon:!0,showButtonBar:!0,modelValue:s(x),"onUpdate:modelValue":t[7]||(t[7]=a=>d(x)?x.value=a:null)},null,8,["modelValue"]),e("small",Se,n(s(l).end_date),1)]),e("div",Ue,[we,o(s(m),{modelValue:s(y),"onUpdate:modelValue":t[8]||(t[8]=a=>d(y)?y.value=a:null),id:"end_time",type:"time",class:c({"p-invalid":s(l).end_time})},null,8,["modelValue","class"]),e("small",Ne,n(s(l).end_time),1)])])]),o(U,{label:"Submeter",class:"mr-2 mb-2",onClick:s(q),disabled:_.value},null,8,["onClick","disabled"]),_.value?(C(),j(N,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):z("",!0)])],32)])]))}}};export{Le as default};
