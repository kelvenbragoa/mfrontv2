import{u as S,r as n,a as F,i as M,o as P,b as l,c as u,d as b,e as o,f as e,w as a,t as i,g,F as U,h as j,j as d,k as x,l as C,R as Y}from"./index-da4e25fd.js";import{b as L}from"./APIConstant-3b96cd31.js";import"./index.esm-8e4dfa6c.js";import{h as $}from"./moment-a9aaa855.js";import{l as q}from"./lodash-a8a05f48.js";import{i as z}from"./laravel-vue-pagination.es-fbb9b548.js";const A={key:0,className:"card"},H={class:"col-12"},Q={class:"card-w-title"},W=o("h5",null,"Eventos",-1),G=o("h5",null,"Registro dos Tickets",-1),J={class:"flex flex-wrap align-items-center justify-content-between gap-2"},K=o("span",{class:"text-xl text-900 font-bold"},"Eventos",-1),O=o("i",{class:"pi pi-eye"},null,-1),X={key:1,class:"text-center"},Z=o("p",null,"Por Favor Aguarde...",-1),ee=o("div",{class:"flex align-items-center justify-content-center"},[o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),o("span",null,"Tem certeza que deseja proceder?")],-1),re={__name:"IndexTickets",setup(te){const y=S(),_=n(!0);n(!1),n(!1);const c=n({data:[]});n([]);const D=F(),m=n(null),f=n(!1);function T(){y&&y.back()}n(!1),n(null);const p=async(h=1)=>{j.get(`${L}/admin-tickets?page=${h}`,{params:{query:m.value}}).then(r=>{c.value=r.data.tickets,_.value=!1}).catch(r=>{_.value=!1,D.add({severity:"error",summary:`${r}`,detail:"Message Detail",life:3e3}),T()})};M(m,q.debounce(()=>{p()},300));const w=()=>{f.value=!1};return P(()=>{p()}),(h,r)=>{const I=l("InputIcon"),B=l("InputText"),E=l("IconField"),v=l("Button"),s=l("Column"),k=l("Tag"),N=l("DataTable"),V=l("ProgressSpinner"),R=l("Dialog");return u(),b(U,null,[_.value?(u(),b("div",X,[e(V,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),Z])):(u(),b("div",A,[o("div",H,[o("div",Q,[W,e(E,{iconPosition:"left"},{default:a(()=>[e(I,{class:"pi pi-search"}),e(B,{type:"text",placeholder:"Procurar ...",modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=t=>m.value=t)},null,8,["modelValue"])]),_:1})]),G,o("p",null,"Esta tabela contem "+i(c.value.data?c.value.total:0)+" Registros.",1),e(N,{value:c.value.data,tableStyle:"min-width: 50rem"},{header:a(()=>[o("div",J,[K,e(v,{icon:"pi pi-refresh",rounded:"",raised:"",onClick:p})])]),footer:a(()=>[d(" No total são "+i(c.value.data?c.value.total:0)+" Eventos. ",1)]),default:a(()=>[e(s,{field:"name",header:"#"},{body:a(t=>[d(i(t.index+1),1)]),_:1}),e(s,{field:"ID",sortable:"",header:"ID"},{body:a(t=>[d(" #"+i(t.data.id),1)]),_:1}),e(s,{field:"event.name",sortable:"",header:"Evento"}),e(s,{field:"ticket.name",sortable:"",header:"Bilhete"}),e(s,{field:"created_at",sortable:"",header:"Valor"},{body:a(t=>[d(i(t.data.sell.price)+" MT ",1)]),_:1}),e(s,{field:"status",sortable:"",header:"Estado"},{body:a(t=>[t.data.status==1?(u(),x(k,{key:0,severity:"success"},{default:a(()=>[d("Não confirmada")]),_:1})):C("",!0),t.data.status==0?(u(),x(k,{key:1,severity:"danger"},{default:a(()=>[d("Confirmada")]),_:1})):C("",!0)]),_:1}),e(s,{field:"sell.transaction.reference",sortable:"",header:"Transação"}),e(s,{field:"created_at",sortable:"",header:"Criado em"},{body:a(t=>[d(i(g($)(t.data.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),e(s,{field:"id",sortable:"",header:"Usuário"},{body:a(t=>[d(i(t.data.name)+" / "+i(t.data.email)+" / "+i(t.data.mobile),1)]),_:1}),e(s,{header:"Ações"},{body:a(t=>[e(g(Y),{to:"/admin/tickets/"+t.data.id},{default:a(()=>[O]),_:2},1032,["to"])]),_:1})]),_:1},8,["value"]),e(g(z),{data:c.value,onPaginationChangePage:p,"bg-whitebg-blue-50":"",style:{width:"10px"}},null,8,["data"])])])),e(R,{header:"Confirmação",visible:f.value,"onUpdate:visible":r[1]||(r[1]=t=>f.value=t),style:{width:"350px"},modal:!0},{footer:a(()=>[e(v,{label:"Não",icon:"pi pi-times",onClick:w,class:"p-button-text"}),e(v,{label:"Sim",icon:"pi pi-check",onClick:h.deleteData,class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:a(()=>[ee]),_:1},8,["visible"])],64)}}};export{re as default};
