import{u as S,r as l,a as $,i as F,o as R,b as i,c as f,d as g,e as o,f as e,w as a,t as d,g as x,F as j,h as k,j as c,k as U,l as Y,m as q}from"./index-da4e25fd.js";import{b as C}from"./APIConstant-3b96cd31.js";import"./index.esm-8e4dfa6c.js";import{h as z}from"./moment-a9aaa855.js";import{l as A}from"./lodash-a8a05f48.js";import{i as L}from"./laravel-vue-pagination.es-fbb9b548.js";const H={key:0,className:"card"},Q={class:"col-12"},W={class:"card-w-title"},G=o("h5",null,"Eventos",-1),J=o("h5",null,"Registro das Transações Temporárias",-1),K={class:"flex flex-wrap align-items-center justify-content-between gap-2"},O=o("span",{class:"text-xl text-900 font-bold"},"Eventos",-1),X=["onClick"],Z=o("i",{class:"pi pi-check"},null,-1),ee=[Z],te={key:1,class:"text-center"},ae=o("p",null,"Por Favor Aguarde...",-1),oe=o("div",{class:"flex align-items-center justify-content-center"},[o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),o("span",null,"Tem certeza que deseja proceder?")],-1),me={__name:"IndexTransacoes",setup(se){const y=S(),_=l(!0);l(!1),l(!1);const r=l({data:[]});l([]);const h=$(),m=l(null),v=l(!1);function D(){y&&y.back()}l(!1),l(null);const p=async(u=1)=>{k.get(`${C}/admin-transacoes?page=${u}`,{params:{query:m.value}}).then(s=>{r.value=s.data.transaction,_.value=!1}).catch(s=>{_.value=!1,h.add({severity:"error",summary:`${s}`,detail:"Message Detail",life:3e3}),D()})};F(m,A.debounce(()=>{p()},300));const T=()=>{v.value=!1},w=u=>{k.get(`${C}/admin-transacoes/${u}`).then(s=>{r.value=s.data.transaction,h.add({severity:"success",summary:"Sucesso",detail:"Message Detail",life:3e3})}).catch(s=>{h.add({severity:"error",summary:`${s}`,detail:"Message Detail",life:3e3})}).finally(()=>{})};return R(()=>{p()}),(u,s)=>{const I=i("InputIcon"),M=i("InputText"),B=i("IconField"),b=i("Button"),n=i("Column"),E=i("Tag"),N=i("DataTable"),P=i("ProgressSpinner"),V=i("Dialog");return f(),g(j,null,[_.value?(f(),g("div",te,[e(P,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ae])):(f(),g("div",H,[o("div",Q,[o("div",W,[G,e(B,{iconPosition:"left"},{default:a(()=>[e(I,{class:"pi pi-search"}),e(M,{type:"text",placeholder:"Procurar ...",modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t)},null,8,["modelValue"])]),_:1})]),J,o("p",null,"Esta tabela contem "+d(r.value.data?r.value.total:0)+" Registros.",1),e(N,{value:r.value.data,tableStyle:"min-width: 50rem"},{header:a(()=>[o("div",K,[O,e(b,{icon:"pi pi-refresh",rounded:"",raised:"",onClick:p})])]),footer:a(()=>[c(" No total são "+d(r.value.data?r.value.total:0)+" Eventos. ",1)]),default:a(()=>[e(n,{field:"name",header:"#"},{body:a(t=>[c(d(t.index+1),1)]),_:1}),e(n,{field:"id",sortable:"",header:"ID"}),e(n,{field:"reference",sortable:"",header:"Referência"}),e(n,{field:"status",sortable:"",header:"Valor"},{body:a(t=>[c(d(t.data.sell.total)+" MT ",1)]),_:1}),e(n,{field:"status",sortable:"",header:"Tickets"},{body:a(t=>[c(d(t.data.sell.selldetails.length),1)]),_:1}),e(n,{field:"method",sortable:"",header:"Método"}),e(n,{field:"sell.event.name",sortable:"",header:"Evento"}),e(n,{field:"status",sortable:"",header:"Estado"},{body:a(t=>[t.data.status==0?(f(),U(E,{key:0,severity:"danger"},{default:a(()=>[c("Não confirmada")]),_:1})):Y("",!0)]),_:1}),e(n,{field:"created_at",sortable:"",header:"Criado em"},{body:a(t=>[c(d(x(z)(t.data.created_at).format("DD-MM-YYYY H:mm")),1)]),_:1}),e(n,{header:"Ações"},{body:a(t=>[o("a",{href:"#",onClick:q(ne=>w(t.data.id),["prevent"])},ee,8,X)]),_:1})]),_:1},8,["value"]),e(x(L),{data:r.value,onPaginationChangePage:p,"bg-whitebg-blue-50":"",style:{width:"10px"}},null,8,["data"])])])),e(V,{header:"Confirmação",visible:v.value,"onUpdate:visible":s[1]||(s[1]=t=>v.value=t),style:{width:"350px"},modal:!0},{footer:a(()=>[e(b,{label:"Não",icon:"pi pi-times",onClick:T,class:"p-button-text"}),e(b,{label:"Sim",icon:"pi pi-check",onClick:u.deleteData,class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:a(()=>[oe]),_:1},8,["visible"])],64)}}};export{me as default};
