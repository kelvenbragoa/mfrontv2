import{u as Q,r as _,a as W,h as w,o as j,b as E,c as C,d as F,e as s,f as o,w as z,g as e,s as r,v as n,t as m,k as A,l as G,j as O,x as c}from"./index-13ef8100.js";import{b as R}from"./APIConstant-069209c7.js";import{u as J}from"./vee-validate.esm-ada8070b.js";import{c as K,a as u}from"./index.esm-7b5acfa1.js";import"./moment-a9aaa855.js";const X={key:0,className:"card"},Y={class:"col-12"},Z={class:"card-w-title"},ee=s("i",{class:"pi pi-angle-left"},null,-1),se=s("h5",null,"Editar Ticket",-1),te=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),ae={class:"col-12 md:col-12"},le={class:"card p-fluid"},oe=s("h5",null,"Formulário Criação de Bilhetes",-1),ie=s("h5",null,"Informação Geral",-1),de={class:"field"},re=s("label",{for:"name"},"Nome",-1),ne={id:"name-help",class:"p-error"},ce={class:"field"},ue=s("label",{for:"price"},"Preço",-1),me={id:"price-help",class:"p-error"},_e={class:"field"},pe=s("label",{for:"description"},"Descrição",-1),ve={id:"description-help",class:"p-error"},he={class:"field"},fe=s("label",{for:"max_qtd"},"Quantidade Máxima",-1),be={id:"max_qtd-help",class:"p-error"},Ve={class:"formgrid grid"},ge={class:"field col"},xe=s("label",{for:"start_date"},"Data de Inicio",-1),ye={id:"start_date-help",class:"p-error"},ke={class:"field col"},qe=s("label",{for:"start_time"},"Horas de Inicio",-1),De={id:"start_time-help",class:"p-error"},Be={class:"formgrid grid"},Se={class:"field col"},Ue=s("label",{for:"end_date"},"Data de Termino",-1),Ce={id:"end_date-help",class:"p-error"},$e={class:"field col"},Ne=s("label",{for:"end_time"},"Horas de Termino",-1),Pe={id:"end_time-help",class:"p-error"},we={key:1,class:"text-center"},Ee=s("p",null,"Por Favor Aguarde...",-1),Le={__name:"EditBilhetes",setup(Fe){const v=Q(),B=_(!1),h=_(!1),i=_();_([]),_([]),_([]),_([]);const S=W();function $(){v&&v.back()}const T=K({name:u().required().trim().label("Nome"),price:u().required().trim().label("Preco"),description:u().required().trim().label("Descricao"),max_qtd:u().required().label("Quantidade"),event_id:u().required().label("Evento"),start_date:u().required().label("Data"),start_time:u().required().label("Horas"),end_date:u().required().label("Data"),end_time:u().required().label("Horas")}),{defineField:d,handleSubmit:H,resetForm:M,errors:l,setErrors:I}=J({validationSchema:T}),[f]=d("name"),[b]=d("event_id"),[V]=d("description"),[g]=d("max_qtd"),[x]=d("start_date"),[y]=d("start_time"),[k]=d("end_date"),[q]=d("end_time"),[D]=d("price"),U=H(p=>{h.value=!0,w.put(`${R}/promotor-tickets/${v.currentRoute.value.params.idbilhetes}`,p).then(t=>{M(),v.back(),S.add({severity:"success",summary:"Successo",detail:"Bilhete alterado com sucesso",life:3e3})}).catch(t=>{h.value=!1,S.add({severity:"error",summary:`${t.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),t.response.data.errors&&I(t.response.data.errors)}).finally(()=>{h.value=!1})}),L=()=>{w.get(`${R}/promotor-tickets/${v.currentRoute.value.params.idbilhetes}/edit`).then(p=>{i.value=p.data.ticket,f.value=i.value.name,b.value=i.value.event_id,y.value=i.value.start_time,q.value=i.value.end_time,x.value=i.value.start_date,k.value=i.value.end_date,g.value=i.value.max_qtd,D.value=i.value.price,V.value=i.value.description,B.value=!1}).catch(p=>{B.value=!1,S.add({severity:"error",summary:`${p}`,detail:"Message Detail",life:3e3}),$()})};return j(()=>{L()}),(p,t)=>{const N=E("Button"),P=E("ProgressSpinner");return B.value?(C(),F("div",we,[o(P,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),Ee])):(C(),F("div",X,[s("div",Y,[s("div",Z,[o(N,{label:"Voltar",class:"mr-2 mb-2",onClick:$},{default:z(()=>[ee,O(" Voltar")]),_:1}),se]),te,s("form",{onSubmit:t[9]||(t[9]=(...a)=>e(U)&&e(U)(...a))},[s("div",ae,[s("div",le,[oe,ie,s("div",de,[re,o(e(c),{modelValue:e(f),"onUpdate:modelValue":t[0]||(t[0]=a=>r(f)?f.value=a:null),id:"name",type:"text",class:n({"p-invalid":e(l).name})},null,8,["modelValue","class"]),s("small",ne,m(e(l).name),1)]),s("div",ce,[ue,o(e(c),{modelValue:e(D),"onUpdate:modelValue":t[1]||(t[1]=a=>r(D)?D.value=a:null),id:"price",type:"number",class:n({"p-invalid":e(l).price})},null,8,["modelValue","class"]),s("small",me,m(e(l).price),1)]),s("div",_e,[pe,o(e(c),{modelValue:e(V),"onUpdate:modelValue":t[2]||(t[2]=a=>r(V)?V.value=a:null),id:"description",type:"text",class:n({"p-invalid":e(l).description})},null,8,["modelValue","class"]),s("small",ve,m(e(l).description),1)]),s("div",he,[fe,o(e(c),{modelValue:e(g),"onUpdate:modelValue":t[3]||(t[3]=a=>r(g)?g.value=a:null),id:"max_qtd",type:"number",class:n({"p-invalid":e(l).max_qtd})},null,8,["modelValue","class"]),o(e(c),{modelValue:e(b),"onUpdate:modelValue":t[4]||(t[4]=a=>r(b)?b.value=a:null),id:"event_id",type:"hidden",class:n({"p-invalid":e(l).event_id})},null,8,["modelValue","class"]),s("small",be,m(e(l).max_qtd),1)]),s("div",Ve,[s("div",ge,[xe,o(e(c),{modelValue:e(x),"onUpdate:modelValue":t[5]||(t[5]=a=>r(x)?x.value=a:null),id:"start_date",type:"date",class:n({"p-invalid":e(l).start_date})},null,8,["modelValue","class"]),s("small",ye,m(e(l).start_date),1)]),s("div",ke,[qe,o(e(c),{modelValue:e(y),"onUpdate:modelValue":t[6]||(t[6]=a=>r(y)?y.value=a:null),id:"start_time",type:"time",class:n({"p-invalid":e(l).start_time})},null,8,["modelValue","class"]),s("small",De,m(e(l).start_time),1)])]),s("div",Be,[s("div",Se,[Ue,o(e(c),{modelValue:e(k),"onUpdate:modelValue":t[7]||(t[7]=a=>r(k)?k.value=a:null),id:"end_date",type:"date",class:n({"p-invalid":e(l).end_date})},null,8,["modelValue","class"]),s("small",Ce,m(e(l).end_date),1)]),s("div",$e,[Ne,o(e(c),{modelValue:e(q),"onUpdate:modelValue":t[8]||(t[8]=a=>r(q)?q.value=a:null),id:"end_time",type:"time",class:n({"p-invalid":e(l).end_time})},null,8,["modelValue","class"]),s("small",Pe,m(e(l).end_time),1)])])]),o(N,{label:"Submeter",class:"mr-2 mb-2",onClick:e(U),disabled:h.value},null,8,["onClick","disabled"]),h.value?(C(),A(P,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):G("",!0)])],32)])]))}}};export{Le as default};
