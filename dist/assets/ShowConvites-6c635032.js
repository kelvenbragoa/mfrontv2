import{u as J,r as l,a as K,h as C,o as O,b as v,c as y,d as B,e,f as s,w as a,j as m,t as p,m as E,F as Q,g as k,R as X,s as Y,p as Z,k as ee,l as te}from"./index-b670bd76.js";import{b as x}from"./APIConstant-43486e71.js";import{u as se}from"./vee-validate.esm-a565d278.js";import{c as ae}from"./index.esm-a7e89c92.js";import"./moment-a9aaa855.js";const oe={key:0,className:"card"},le={class:"col-12"},ie={class:"card-w-title"},ne=e("i",{class:"pi pi-angle-left"},null,-1),re=e("p",null,"Detalhes do Convite",-1),de=e("strong",null,"Nome: ",-1),ce=e("strong",null,"Descrição: ",-1),ue=e("hr",null,null,-1),me=e("h5",{class:"mt-2 mb-2"},"Convidados Para o Evento",-1),ve=e("i",{class:"pi pi-plus"},null,-1),pe={class:"flex flex-wrap align-items-center justify-content-between gap-2"},fe=e("span",{class:"text-xl text-900 font-bold"},"Convidados",-1),_e=e("i",{class:"pi pi-eye"},null,-1),he=["onClick"],be=e("i",{class:"pi pi-trash"},null,-1),ge=[be],Ce={key:1,class:"text-center"},ye=e("p",null,"Por Favor Aguarde...",-1),ke={class:"flex align-items-center justify-content-center"},xe={class:"col-12 md:col-12"},De={class:"card p-fluid"},Se=e("h5",null,"Adicionar Convidado",-1),we={class:"field"},$e=e("label",{for:"name"},"Convidado",-1),Be=e("div",{class:"flex align-items-center justify-content-center"},[e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),e("span",null,"Tem certeza que deseja proceder?")],-1),Ee={__name:"ShowConvites",setup(Ne){const f=J(),D=l(!0),i=l(!1),c=l(),d=K(),u=l([]);l([]);const S=l(!1),w=l(0),_=l(!1),P=()=>{_.value=!0},N=()=>{_.value=!1};function V(){f&&f.back()}const U=ae({}),{defineField:Ve,handleSubmit:L,resetForm:z,errors:A,setErrors:I}=se({validationSchema:U}),h=l(),R=l(null),M=()=>{R.value={name:h.value,event_id:c.value.event_id,invite_id:c.value.id,status:1},i.value=!0,C.post(`${x}/promotor-customers`,R.value).then(t=>{d.add({severity:"success",summary:"Successo",detail:"Convidado criado com sucesso",life:3e3}),$(),h.value="",i.value=!1,N()}).catch(t=>{i.value=!1,d.add({severity:"error",summary:`${t.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),t.response.data.errors&&I(t.response.data.errors)}).finally(()=>{})},q=L(()=>{console.log("Submitted with",values),i.value=!0,C.post(`${x}/drivers`,values).then(t=>{z(),f.push({path:"/drivers"}),d.add({severity:"success",summary:"Successo",detail:"Registro criada com sucesso",life:3e3})}).catch(t=>{i.value=!1,d.add({severity:"error",summary:`${t.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),t.response.data.errors&&I(t.response.data.errors)}).finally(()=>{i.value=!1})}),b=l(!1),F=()=>{b.value=!1},W=t=>{b.value=!0,w.value=t},G=()=>{S.value=!0,C.delete(`${x}/promotor-customers/${w.value}`).then(()=>{u.value=u.value.filter(t=>t.id!==w.value),F(),d.add({severity:"success",summary:"Sucesso",detail:"Message Detail",life:3e3})}).catch(t=>{d.add({severity:"error",summary:`${t}`,detail:"Message Detail",life:3e3}),S.value=!1}).finally(()=>{S.value=!1})},$=()=>{C.get(`${x}/promotor-invites/${f.currentRoute.value.params.idconvites}`).then(t=>{c.value=t.data.invite,u.value=t.data.customer,D.value=!1}).catch(t=>{D.value=!1,d.add({severity:"error",summary:`${t}`,detail:"Message Detail",life:3e3}),V()})};return O(()=>{$()}),(t,n)=>{const r=v("Button"),g=v("Column"),H=v("DataTable"),T=v("ProgressSpinner"),j=v("Dialog");return y(),B(Q,null,[D.value?(y(),B("div",Ce,[s(T,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ye])):(y(),B("div",oe,[e("div",le,[e("div",ie,[s(r,{label:"Voltar",class:"mr-2 mb-2",onClick:V},{default:a(()=>[ne,m(" Voltar")]),_:1})]),re,e("p",null,[de,m(p(c.value.name),1)]),e("p",null,[ce,m(p(c.value.description),1)]),ue,me,s(r,{onClick:n[0]||(n[0]=E(o=>P(),["prevent"])),label:"Criar Novo Registro",class:"mr-2 mb-2"},{default:a(()=>[ve,m(" Criar Convidados ")]),_:1}),e("p",null,"Esta tabela de Convidados contem "+p(u.value.length)+" Registros.",1),s(H,{value:u.value,tableStyle:"min-width: 50rem"},{header:a(()=>[e("div",pe,[fe,s(r,{icon:"pi pi-refresh",rounded:"",raised:"",onClick:$})])]),footer:a(()=>[m(" No total são "+p(u.value.length)+" Convidados. ",1)]),default:a(()=>[s(g,{field:"name",header:"#"},{body:a(o=>[m(p(o.index+1),1)]),_:1}),s(g,{field:"name",sortable:"",header:"Nome"}),s(g,{field:"status",sortable:"",header:"Estado"}),s(g,{header:"Ações"},{body:a(o=>[s(k(X),{to:"/admin/eventos/"+c.value.id+"/convites/"+o.data.id,class:"mr-2"},{default:a(()=>[_e]),_:2},1032,["to"]),e("a",{href:"#",onClick:E(Ie=>W(o.data.id),["prevent"]),class:"mr-2"},ge,8,he)]),_:1})]),_:1},8,["value"])])])),s(j,{header:"Convidado",visible:_.value,"onUpdate:visible":n[2]||(n[2]=o=>_.value=o),style:{width:"350px"},modal:!0},{footer:a(()=>[s(r,{label:"Não",icon:"pi pi-times",onClick:N,class:"p-button-text"}),s(r,{label:"Sim",icon:"pi pi-check",onClick:k(q),class:"p-button-text",autofocus:""},null,8,["onClick"])]),default:a(()=>[e("div",ke,[e("form",{onSubmit:M},[e("div",xe,[e("div",De,[Se,e("div",we,[$e,s(k(Y),{modelValue:h.value,"onUpdate:modelValue":n[1]||(n[1]=o=>h.value=o),id:"name",required:"",type:"text",class:Z({"p-invalid":k(A).name})},null,8,["modelValue","class"])])]),s(r,{label:"Submeter",class:"mr-2 mb-2",onClick:M,disabled:i.value},null,8,["disabled"]),i.value?(y(),ee(T,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):te("",!0)])],32)])]),_:1},8,["visible"]),s(j,{header:"Confirmação",visible:b.value,"onUpdate:visible":n[3]||(n[3]=o=>b.value=o),style:{width:"350px"},modal:!0},{footer:a(()=>[s(r,{label:"Não",icon:"pi pi-times",onClick:F,class:"p-button-text"}),s(r,{label:"Sim",icon:"pi pi-check",onClick:G,class:"p-button-text",autofocus:""})]),default:a(()=>[Be]),_:1},8,["visible"])],64)}}};export{Ee as default};
