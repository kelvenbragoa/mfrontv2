import{u as M,r as d,a as T,h as $,o as W,b as N,c as q,d as D,e as s,f as t,w as j,g as e,s as n,v as c,t as _,k as z,l as A,j as G,x as v,y as I}from"./index-4c06444b.js";import{b as w}from"./APIConstant-7cd3c3b1.js";import{u as O}from"./vee-validate.esm-153206bd.js";import{c as H,a as u}from"./index.esm-7b5acfa1.js";import"./moment-a9aaa855.js";const J={key:0,className:"card"},K={class:"col-12"},X={class:"card-w-title"},Y=s("i",{class:"pi pi-angle-left"},null,-1),Z=s("h5",null,"Criar Produto",-1),ee=s("small",{class:"p-error"},"Os campos marcados * sao considerados campos obrigatorios.",-1),se={class:"col-12 md:col-12"},ae={class:"card p-fluid"},le=s("h5",null,"Formulário Criação de Produto",-1),oe=s("h5",null,"Informação Geral",-1),te={class:"field"},re=s("label",{for:"name"},"Nome",-1),ie={id:"name-help",class:"p-error"},de={class:"field"},ne=s("label",{for:"buy_price"},"Preço de Compra",-1),ce={id:"buy_price-help",class:"p-error"},ue={class:"field"},me=s("label",{for:"sell_price"},"Preço de Venda",-1),pe={id:"sell_price-help",class:"p-error"},_e={class:"field"},ve=s("label",{for:"qtd"},"Quantidade",-1),be={id:"qtd-help",class:"p-error"},fe={class:"field"},he=s("label",{for:"bar_store_id"},"Bar",-1),ye={id:"bar_store_id-help",class:"p-error"},Ve={key:1,class:"text-center"},ge=s("p",null,"Por Favor Aguarde...",-1),Be={__name:"CreateProdutos",setup(ke){const b=M(),f=d(!1),m=d(!1),P=d([]);d([]),d([]),d([]);const h=T();function S(){b&&b.back()}const F=H({name:u().required().trim().label("Nome"),buy_price:u().required().label("Quantidade"),sell_price:u().required().label("Quantidade"),qtd:u().required().label("Quantidade"),event_id:u().required().label("Evento"),bar_store_id:u().required().label("Evento")}),{defineField:r,handleSubmit:E,resetForm:L,errors:o,setErrors:Q}=O({validationSchema:F}),[y]=r("name"),[p]=r("event_id"),[V]=r("sell_price"),[g]=r("qtd"),[k]=r("buy_price"),[x]=r("bar_store_id"),C=E(i=>{m.value=!0,$.post(`${w}/promotor-products`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{L(),b.back(),h.add({severity:"success",summary:"Successo",detail:"Produto criado com sucesso",life:3e3})}).catch(a=>{m.value=!1,h.add({severity:"error",summary:`${a.response.data.message}`,detail:"Detalhe da Mensagem",life:3e3}),a.response.data.errors&&Q(a.response.data.errors)}).finally(()=>{m.value=!1})}),R=()=>{$.get(`${w}/auxiliar-event/${p.value}`).then(i=>{P.value=i.data.barstore,f.value=!1}).catch(i=>{f.value=!1,h.add({severity:"error",summary:`${i}`,detail:"Message Detail",life:3e3}),S()})};return W(()=>{p.value=b.currentRoute.value.params.id,R()}),(i,a)=>{const B=N("Button"),U=N("ProgressSpinner");return f.value?(q(),D("div",Ve,[t(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ge])):(q(),D("div",J,[s("div",K,[s("div",X,[t(B,{label:"Voltar",class:"mr-2 mb-2",onClick:S},{default:j(()=>[Y,G(" Voltar")]),_:1}),Z]),ee,s("form",{onSubmit:a[6]||(a[6]=(...l)=>e(C)&&e(C)(...l))},[s("div",se,[s("div",ae,[le,oe,s("div",te,[re,t(e(v),{modelValue:e(y),"onUpdate:modelValue":a[0]||(a[0]=l=>n(y)?y.value=l:null),id:"name",type:"text",class:c({"p-invalid":e(o).name})},null,8,["modelValue","class"]),t(e(v),{modelValue:e(p),"onUpdate:modelValue":a[1]||(a[1]=l=>n(p)?p.value=l:null),id:"name",type:"hidden",class:c({"p-invalid":e(o).name})},null,8,["modelValue","class"]),s("small",ie,_(e(o).name),1)]),s("div",de,[ne,t(e(v),{modelValue:e(k),"onUpdate:modelValue":a[2]||(a[2]=l=>n(k)?k.value=l:null),id:"buy_price",type:"text",class:c({"p-invalid":e(o).buy_price})},null,8,["modelValue","class"]),s("small",ce,_(e(o).buy_price),1)]),s("div",ue,[me,t(e(v),{modelValue:e(V),"onUpdate:modelValue":a[3]||(a[3]=l=>n(V)?V.value=l:null),id:"sell_price",type:"text",class:c({"p-invalid":e(o).sell_price})},null,8,["modelValue","class"]),s("small",pe,_(e(o).sell_price),1)]),s("div",_e,[ve,t(e(v),{modelValue:e(g),"onUpdate:modelValue":a[4]||(a[4]=l=>n(g)?g.value=l:null),id:"qtd",type:"text",class:c({"p-invalid":e(o).qtd})},null,8,["modelValue","class"]),s("small",be,_(e(o).qtd),1)]),s("div",fe,[he,t(e(I),{modelValue:e(x),"onUpdate:modelValue":a[5]||(a[5]=l=>n(x)?x.value=l:null),options:P.value,optionLabel:"name",optionValue:"id",placeholder:"Selecionar",class:c({"p-invalid":e(o).province_id})},null,8,["modelValue","options","class"]),s("small",ye,_(e(o).bar_store_id),1)])]),t(B,{label:"Submeter",class:"mr-2 mb-2",onClick:e(C),disabled:m.value},null,8,["onClick","disabled"]),m.value?(q(),z(U,{key:0,style:{width:"35px",height:"35px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):A("",!0)])],32)])]))}}};export{Be as default};
